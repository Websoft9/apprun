basePath: /api
definitions:
  config.ErrorResponse:
    properties:
      details:
        type: string
      error:
        type: string
    type: object
  config.GetConfigResponse:
    properties:
      is_dynamic:
        description: 是否为动态配置
        type: boolean
      key:
        description: 配置键
        type: string
      source:
        description: '来源: "database", "file", "env", "default"'
        type: string
      value:
        description: 配置值
        type: string
    type: object
  config.ListConfigsResponse:
    properties:
      configs:
        additionalProperties:
          type: string
        description: key -> value 映射
        type: object
      count:
        description: 配置项数量
        type: integer
    type: object
  config.UpdateConfigRequest:
    properties:
      key:
        description: 配置键
        type: string
      value:
        description: 新值
        type: string
    required:
    - key
    - value
    type: object
  config.UpdateConfigResponse:
    properties:
      key:
        type: string
      message:
        type: string
      success:
        type: boolean
      value:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@websoft9.com
    name: API Support
  description: AppRun 平台 REST API 文档
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: AppRun API
  version: "1.0"
paths:
  /config:
    delete:
      consumes:
      - application/json
      description: 从数据库中删除指定的动态配置项（配置将恢复为文件或默认值）
      parameters:
      - description: 配置键
        in: query
        name: key
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 缺少 key 参数或删除失败
          schema:
            $ref: '#/definitions/config.ErrorResponse'
      summary: 删除配置项
      tags:
      - config
    get:
      consumes:
      - application/json
      description: 根据 key 查询单个配置项，返回值、来源和是否为动态配置
      parameters:
      - description: 配置键，例如 app.name
        in: query
        name: key
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 配置查询成功
          schema:
            $ref: '#/definitions/config.GetConfigResponse'
        "400":
          description: 缺少 key 参数
          schema:
            $ref: '#/definitions/config.ErrorResponse'
        "404":
          description: 配置不存在
          schema:
            $ref: '#/definitions/config.ErrorResponse'
      summary: 获取配置项
      tags:
      - config
    put:
      consumes:
      - application/json
      description: 更新单个动态配置项（仅限 db:true 的配置）
      parameters:
      - description: 配置更新请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/config.UpdateConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 配置更新成功
          schema:
            $ref: '#/definitions/config.UpdateConfigResponse'
        "400":
          description: 请求无效或配置不允许存储到数据库
          schema:
            $ref: '#/definitions/config.ErrorResponse'
      summary: 更新配置项
      tags:
      - config
  /config/allowed:
    get:
      consumes:
      - application/json
      description: 返回所有标记为 db:true 的配置键列表（可通过 API 动态修改）
      produces:
      - application/json
      responses:
        "200":
          description: 允许的配置键列表
          schema:
            additionalProperties: true
            type: object
      summary: 获取允许的配置键
      tags:
      - config
  /config/list:
    get:
      consumes:
      - application/json
      description: 返回所有存储在数据库中的动态配置项列表
      produces:
      - application/json
      responses:
        "200":
          description: 配置列表
          schema:
            $ref: '#/definitions/config.ListConfigsResponse'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/config.ErrorResponse'
      summary: 列出动态配置
      tags:
      - config
schemes:
- http
- https
swagger: "2.0"
